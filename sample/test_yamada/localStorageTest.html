<!DOCTYPE HTML> 
<html lang="en"> 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta http-equiv="Content-Language" content="en-us"> 

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://skyway.io/dist/0.3/peer.js"></script>
<script>
	$(document).ready(function() {
		$('#createdata').click(function(){
			var key = $('#id').val();
			var jsonObj = {
				"val1" : $('#val1').val(),
				"val2" : $('#val2').val()
			};
			
			localStorage.setItem(key, JSON.stringify(jsonObj));
			
			$('#val1').val('');
			$('#val2').val('');
		});
		
		$('#jsonStorageAdd').click(function(){
			window.open('sample.html',null,'width=400, height=300');
		});
		
		$('#testeach').click(function(){
			var targetObj = JSON.parse(localStorage.getItem($('#id').val()));
			// var resultView = $('<div></div>').addClass('view').addClass('getValues');
			
			var arrayValue = targetObj.val1.split(",");
			
			arrayValue.each(function(){
				alert($(this));
			});
			
			
			<!-- 
			var loopMax = targetObj.val1.length;
			for(i = 0; i < loopMax; i++){
				alert(targetObj.val1[i]);
			}
			-->
		});
	});
</script>

</head>
<body>

<input type ="text" id ="id"/><br/>
<input type ="text" id ="val1"/><br/>
<input type ="text" id ="val2"/><br/>
<input class ="button" type ="button" value ="saveLocalStorage" id ="createdata"/>
<input class ="button" type ="button" value ="testeach" id ="testeach"/>
<input type="button" name="jsonStorageAdd" id="jsonStorageAdd" value="書き込み"/>

<div id ="view">
</div>


</body>
</html>
