<!DOCTYPE HTML> 
<html lang="en"> 
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta http-equiv="Content-Language" content="en-us"> 

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script type="text/javascript" src="https://skyway.io/dist/0.3/peer.js"></script>
<script>
	$(document).ready(function() {
		$('#createdata').click(function(){
			var key = $('#id').val();
			var jsonObj = {
				"val1" : $('#val1').val(),
				"val2" : $('#val2').val()
			};
			
			localStorage.setItem(key, JSON.stringify(jsonObj));
			
			$('#val1').val('');
			$('#val2').val('');
		});
		
		$('#jsonStorageAdd').click(function(){
			window.open('sample.html',null,'width=400, height=300');
		});
		
		$('#getarrayValue').click(function(){
			var targetObj = JSON.parse(localStorage.getItem($('#id').val()));
			var arrayValue = targetObj.val1.split(",");
			for(var index in arrayValue){
				alert(arrayValue[index]);	
			}
		});
		
		$('#viewadd').click(function(){
			var addValue = $('<div></div').append('<p></p>').append($('#addText').val());
			$('#view').append(addValue);
		});
	});
</script>

</head>
<body>

<input type ="text" id ="id"/><br/>
<input type ="text" id ="val1"/><br/>
<input type ="text" id ="val2"/><br/>
<input class ="button" type ="button" value ="saveLocalStorage" id ="createdata"/>
<input class ="button" type ="button" value ="getarrayValue" id ="getarrayValue"/>
<input type="button" name="jsonStorageAdd" id="jsonStorageAdd" value="書き込み"/><br/><br/>

<input type ="text" id ="addText"/><br/>
<input type = "button" id ="viewadd"/><br/>

<div id ="view">
</div>


</body>
</html>
